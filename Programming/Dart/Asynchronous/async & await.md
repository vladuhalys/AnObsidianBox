`async` і `await` — це два ключові слова в Dart, які використовуються для роботи з асинхронними операціями. Вони допомагають зробити асинхронний код більш читабельним і лінійним, що значно полегшує його розуміння.

### Як працюють `async` і `await`?

- **`async`**:
    
    - Це ключове слово позначає функцію як асинхронну, тобто таку, яка може виконувати асинхронні операції. Коли функція позначена як `async`, вона автоматично повертає `Future`, навіть якщо явного `Future` в коді немає.
    - `async` дозволяє використовувати ключове слово `await` для очікування завершення асинхронної операції.
- **`await`**:
    
    - Це ключове слово використовується для очікування результату `Future`. Коли ви ставите `await` перед асинхронною операцією, Dart зупиняє виконання коду в цій точці, поки не буде отримано результат.
    - Виконання продовжиться лише після того, як `Future` буде завершено.

### Приклад використання `async` і `await`
```dart
Future<void> fetchData() async {
  print("Start fetching...");
  await Future.delayed(Duration(seconds: 2)); // імітація затримки операції
  print("Data fetched.");
}

void main() async {
  print("Fetching data...");
  await fetchData();
  print("Done.");
}
```

У цьому прикладі функція `fetchData` позначена як `async`, що дозволяє використовувати `await` для очікування завершення операції `Future.delayed`. Код виконується послідовно:

1. Спочатку виводиться "Fetching data..."
2. Викликається функція `fetchData`, яка виводить "Start fetching...", потім очікує 2 секунди, і виводить "Data fetched."
3. Після завершення операції функція `main` продовжує виконання та виводить "Done."

### Як [[async & await]] впливають на [[Future]]

Функція, оголошена з ключовим словом `async`, завжди повертає `Future`. Це дозволяє програмі очікувати завершення асинхронних операцій.

```dart
Future<String> getData() async {
  return "Data received";
}
```

Тут `getData` повертає результат типу `Future<String>`, хоча повертається просто рядок. Завдяки `async`, Dart обгортає результат у `Future`.

### Обробка помилок в асинхронному коді

Коли використовуються `async` і `await`, обробка помилок може здійснюватися за допомогою стандартного механізму `try-catch`.

```dart
Future<void> fetchData() async {
  try {
    print("Fetching data...");
    await Future.delayed(Duration(seconds: 2), () {
      throw Exception("Something went wrong");
    });
    print("Data fetched.");
  } catch (e) {
    print("Error: $e");
  }
}

void main() async {
  await fetchData();
}
```

У цьому прикладі всередині функції `fetchData` кидається виняток через 2 секунди. `try-catch` блок ловить цю помилку, і замість завершення програми ми бачимо "Error: Exception: Something went wrong".

### Паралельне виконання кількох асинхронних операцій

Якщо потрібно запустити кілька асинхронних операцій паралельно, Dart надає механізми для цього, наприклад, використання [[Future.wait()]]

```dart
Future<void> fetchData() async {
  await Future.wait([
    Future.delayed(Duration(seconds: 2), () => print("Fetching data from API 1")),
    Future.delayed(Duration(seconds: 3), () => print("Fetching data from API 2")),
  ]);
  print("All data fetched.");
}

void main() async {
  await fetchData();
}
```

У цьому прикладі обидва `Future` запускаються одночасно, і програма чекає, поки всі вони завершаться.

### Основні моменти про `async` і `await`:

1. Функції, позначені як `async`, завжди повертають `Future`, навіть якщо фактично результат — це, наприклад, рядок чи число.
2. Ключове слово `await` призупиняє виконання функції до завершення `Future`.
3. Обробка помилок в асинхронних функціях здійснюється через `try-catch`.
4. Ви можете запускати кілька асинхронних операцій паралельно, використовуючи [[Future.wait()]].

Асинхронне програмування в Dart надає великий контроль і гнучкість для роботи з операціями, які потребують часу, такими як запити до сервера, читання файлів або інші I/O операції. `async` і `await` роблять ці процеси простими і зручними для розуміння та обробки.